(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2831],{28226:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>g});var a=r(95155),i=r(90221),t=r(62177),n=r(55594),l=r(30285),c=r(17759),d=r(62523),o=r(66695),h=r(50172),u=r(50594),m=r(12115),p=r(87481),x=r(35695),j=r(55365),f=r(82320),v=r(8731),w=r(28214);let N=new RegExp(/^([+]?[\s0-9]+)?(\d{3}|[(]?[0-9]+[)])?([-]?[\s]?[0-9])+$/),b=n.Ik({associatedUser:n.Yj().superRefine((e,s)=>{let r=n.Yj().email().safeParse(e).success,a=N.test(e)&&e.length>=10;r||a||s.addIssue({code:n.eq.custom,message:"Must be a valid email or a phone number with at least 10 digits."})})});function g(){let[e]=(0,v.hD)(w.j2),{toast:s}=(0,p.dj)(),r=(0,x.useRouter)(),[n,N]=(0,m.useState)(!1),g=(0,t.mN)({resolver:(0,i.u)(b),defaultValues:{associatedUser:""}});async function k(a){N(!0);try{if(!e)throw Error("User not authenticated");let i=await (0,f.Nq)(a.associatedUser,e.uid);s({title:"Invite Code Generated!",description:"New single-use code created: ".concat(i.code)}),r.push("/admin/referrals")}catch(e){s({title:"Failed to Generate Code",description:"There was a problem creating the referral code. Please try again.",variant:"destructive"})}finally{N(!1)}}return(0,a.jsxs)(o.Zp,{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)(o.aR,{children:[(0,a.jsx)(o.ZB,{children:"Generate Single-Use Invite Code"}),(0,a.jsx)(o.BT,{children:"Create a unique, 24-hour invite link for a specific referrer."})]}),(0,a.jsxs)(o.Wu,{children:[(0,a.jsx)(c.lV,{...g,children:(0,a.jsxs)("form",{onSubmit:g.handleSubmit(k),className:"space-y-6",children:[(0,a.jsx)(c.zB,{control:g.control,name:"associatedUser",render:e=>{let{field:s}=e;return(0,a.jsxs)(c.eI,{children:[(0,a.jsx)(c.lR,{children:"Associated Referrer's Email or Phone"}),(0,a.jsx)(c.MJ,{children:(0,a.jsx)(d.p,{placeholder:"Enter a valid email or phone number",...s})}),(0,a.jsx)(c.Rr,{children:"Link this invite to a specific reviewer or affiliate for tracking."}),(0,a.jsx)(c.C5,{})]})}}),(0,a.jsxs)(l.$,{type:"submit",className:"w-full",disabled:n,children:[n&&(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generate Invite & View List"]})]})}),(0,a.jsxs)(j.Fc,{className:"mt-6",children:[(0,a.jsx)(u.A,{className:"h-4 w-4"}),(0,a.jsx)(j.XL,{children:"Heads Up!"}),(0,a.jsx)(j.TN,{children:"All generated codes are single-use and expire 24 hours after creation. Generation is limited to 10 per hour and 25 per day to prevent spam."})]})]})]})}},99163:(e,s,r)=>{Promise.resolve().then(r.bind(r,28226))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,4277,555,5594,9260,8731,2320,5959,8441,1684,7358],()=>s(99163)),_N_E=e.O()}]);