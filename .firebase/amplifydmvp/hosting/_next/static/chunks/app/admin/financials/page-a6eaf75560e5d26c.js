(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[871],{6160:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(40157).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},28214:(e,t,a)=>{"use strict";a.d(t,{IG:()=>f,db:()=>p,j2:()=>m,rm:()=>x});var n=a(23915),r=a(93004),s=a(35317),o=a(81427),c=a(90858),l=a(86864),i=a(49509);let d={apiKey:"AIzaSyDZoznRXygrNINbo60NI6oidbcxd1vQSlY",authDomain:"amplifydmvp.firebaseapp.com",projectId:"amplifydmvp",storageBucket:"amplifydmvp.appspot.com",messagingSenderId:"486875334710",appId:"1:486875334710:web:aa477f4f137cac9d3f7097",measurementId:"G-RJJ6V0LHFK"};if(!(d.apiKey&&d.authDomain&&d.projectId&&d.storageBucket&&d.messagingSenderId&&d.appId))throw Error("Missing Firebase environment variables. Please check your .env.local file.");let u=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)(d),m=(0,r.xI)(u),p=(0,s.aU)(u),f=(0,c.c7)(u);(0,l.TT)().then(e=>e?(0,l.P5)(u):null);let g=null;if(i.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST&&((0,r.Wq)(m,"http://".concat(i.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST)),console.log("Connected to Auth Emulator: http://".concat(i.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST))),i.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST){let[e,t]=i.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST.split(":");(0,s.vN)(p,e,parseInt(t)),console.log("Connected to Firestore Emulator: http://".concat(e,":").concat(t))}if(i.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST){let[e,t]=i.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST.split(":");(0,c.nb)(f,e,parseInt(t)),console.log("Connected to Storage Emulator: http://".concat(i.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST))}if(g=(0,o.Uz)(u),i.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST){let[e,t]=i.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,o.f5)(g,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}function x(){if(!g&&(g=(0,o.Uz)(u),i.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST)){let[e,t]=i.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,o.f5)(g,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}return g}},38109:(e,t,a)=>{Promise.resolve().then(a.bind(a,43904))},38995:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>d,Sy:()=>i,dQ:()=>l,s2:()=>m,y6:()=>u});var n=a(35317),r=a(81427),s=a(28214);let o=null;function c(){console.log("Reviewer cache invalidated."),o=null}async function l(){if(o)return console.log("Returning cached reviewers..."),o;console.log("Fetching reviewers from Firestore...");let e=(await (0,n.GG)((0,n.P)((0,n.rJ)(s.db,"reviewers"),(0,n.My)("name")))).docs.map(e=>({id:e.id,...e.data()}));return o=e,e}async function i(e){console.log("[getReviewerById] Attempting to fetch reviewer with ID: ".concat(e));let t=(0,n.H9)(s.db,"reviewers",e),a=await (0,n.x7)(t);if(!a.exists())return console.log("[getReviewerById] No reviewer document found for ID: ".concat(e)),null;{let e={id:a.id,...a.data()};return console.log("[getReviewerById] Reviewer found:",e),e}}async function d(e,t){let a=(0,r.Uz)(),n=(0,r.Qg)(a,"addPackage");try{let a=await n(t);return c(),console.log("Add package function called for reviewer ".concat(e)),a.data}catch(t){console.error("Error calling addPackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to add package: ".concat(e))}}async function u(e,t){let a=(0,r.Uz)(),n=(0,r.Qg)(a,"updatePackage");try{await n(t),c(),console.log("Update package function called for package ".concat(t.id))}catch(t){console.error("Error calling updatePackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to update package: ".concat(e))}}async function m(e,t){let a=(0,r.Uz)(),n=(0,r.Qg)(a,"deletePackage");try{await n({packageId:t}),c(),console.log("Delete package function called for package ".concat(t))}catch(t){console.error("Error calling deletePackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to delete package: ".concat(e))}}},43904:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(95155),r=a(66695),s=a(88390),o=a(6160),c=a(80659),l=a(50286);let i=(0,a(40157).A)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var d=a(6874),u=a.n(d),m=a(82320),p=a(12115),f=a(68856),g=a(35462),x=a(67426);let h=(0,a(55028).default)(()=>Promise.all([a.e(191),a.e(7522)]).then(a.bind(a,17522)),{loadableGenerated:{webpack:()=>[17522]},ssr:!1,loading:()=>(0,n.jsx)(f.E,{className:"h-96"})});function y(){return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(f.E,{className:"h-4 w-2/3"}),(0,n.jsx)(f.E,{className:"h-4 w-4"})]}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsx)(f.E,{className:"h-8 w-1/3"}),(0,n.jsx)(f.E,{className:"h-3 w-1/2 mt-1"})]})]})}function E(e){let{title:t,value:a,icon:s,description:o}=e;return(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(r.ZB,{className:"text-sm font-medium",children:t}),(0,n.jsx)(s,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(r.Wu,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:a}),o&&(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:o})]})]})}function v(){let[e,t]=(0,p.useState)(null),[a,d]=(0,p.useState)(null),[v,_]=(0,p.useState)([]),[T,N]=(0,p.useState)(!0);(0,p.useEffect)(()=>{(async()=>{N(!0);let[e,a,n]=await Promise.all([(0,m.jh)(),(0,m._9)(),(0,m.GC)()]);t(e),d(n),_(function(e){let t=new Date,a={};for(let e=5;e>=0;e--){let n=(0,g.a)(t,e),r=(0,x.GP)(n,"yyyy-MM"),s=(0,x.GP)(n,"MMM");a[r]={month:s,revenue:0}}return e.forEach(e=>{let t=new Date(e.date),n=(0,x.GP)(t,"yyyy-MM");a[n]&&(a[n].revenue+=e.amountInCents/100)}),Object.values(a)}(a)),N(!1)})()},[]);let R=e&&a?[{title:"Total Revenue (All Time)",value:"$".concat(e.totalRevenue.toFixed(2)),icon:s.A},{title:"Successful Transactions",value:a.successfulTransactions.toString(),icon:o.A,description:"".concat(a.totalTransactions," total transactions")},{title:"Conversion Rate",value:"".concat(a.conversionRate.toFixed(1),"%"),icon:c.A,description:"".concat(a.failedTransactions," failed transactions")},{title:"Average Revenue Per User",value:"$".concat(e.avgRevenuePerUser.toFixed(2)),icon:l.A,description:"Based on ".concat(e.totalUsers," users")},{title:"Pending Payouts",value:"$".concat(e.pendingPayouts.toFixed(2)),icon:i,description:"".concat(e.pendingPayoutsCount," payouts pending")}]:[];return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Financials"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(u(),{href:"/admin/financials/payouts",children:(0,n.jsx)("button",{className:"px-4 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Payouts"})}),(0,n.jsx)(u(),{href:"/admin/financials/transactions",children:(0,n.jsx)("button",{className:"px-4 py-2 text-sm font-medium rounded-md bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Transactions"})})]})]}),(0,n.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",children:T?Array.from({length:5}).map((e,t)=>(0,n.jsx)(y,{},t)):R.map(e=>(0,n.jsx)(E,{...e},e.title))}),(0,n.jsxs)(r.Zp,{children:[(0,n.jsxs)(r.aR,{children:[(0,n.jsx)(r.ZB,{children:"Revenue Over Time"}),(0,n.jsx)(r.BT,{children:"Monthly revenue based on payouts over the last 6 months."})]}),(0,n.jsx)(r.Wu,{className:"pl-2",children:T?(0,n.jsx)(f.E,{className:"h-96"}):(0,n.jsx)(h,{data:v})})]})]})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var n=a(52596),r=a(39688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,n.$)(t))}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>l,Zp:()=>o,aR:()=>c,wL:()=>u});var n=a(95155),r=a(12115),s=a(59434);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});o.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...r})});c.displayName="CardHeader";let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});l.displayName="CardTitle";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...r})});i.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...r})});d.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},68856:(e,t,a)=>{"use strict";a.d(t,{E:()=>s});var n=a(95155),r=a(59434);function s(e){let{className:t,...a}=e;return(0,n.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},80659:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(40157).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},88390:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=(0,a(40157).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,4277,555,6874,5594,2604,1788,2320,8441,1684,7358],()=>t(38109)),_N_E=e.O()}]);