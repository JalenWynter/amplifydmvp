(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8248],{17607:(e,n,r)=>{"use strict";r.d(n,{A:()=>t});let t=(0,r(40157).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},37648:(e,n,r)=>{"use strict";r.d(n,{A:()=>t});let t=(0,r(40157).A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},38995:(e,n,r)=>{"use strict";r.d(n,{Eb:()=>d,Sy:()=>o,dQ:()=>c,s2:()=>m,y6:()=>u});var t=r(35317),s=r(81427),l=r(28214);let i=null;function a(){console.log("Reviewer cache invalidated."),i=null}async function c(){if(i)return console.log("Returning cached reviewers..."),i;console.log("Fetching reviewers from Firestore...");let e=(await (0,t.GG)((0,t.P)((0,t.rJ)(l.db,"reviewers"),(0,t.My)("name")))).docs.map(e=>({id:e.id,...e.data()}));return i=e,e}async function o(e){console.log("[getReviewerById] Attempting to fetch reviewer with ID: ".concat(e));let n=(0,t.H9)(l.db,"reviewers",e),r=await (0,t.x7)(n);if(!r.exists())return console.log("[getReviewerById] No reviewer document found for ID: ".concat(e)),null;{let e={id:r.id,...r.data()};return console.log("[getReviewerById] Reviewer found:",e),e}}async function d(e,n){let r=(0,s.Uz)(),t=(0,s.Qg)(r,"addPackage");try{let r=await t(n);return a(),console.log("Add package function called for reviewer ".concat(e)),r.data}catch(n){console.error("Error calling addPackage Cloud Function:",n);let e="An unknown error occurred.";throw n instanceof Error?e=n.message:"object"==typeof n&&null!==n&&"message"in n&&(e=n.message),Error("Failed to add package: ".concat(e))}}async function u(e,n){let r=(0,s.Uz)(),t=(0,s.Qg)(r,"updatePackage");try{await t(n),a(),console.log("Update package function called for package ".concat(n.id))}catch(n){console.error("Error calling updatePackage Cloud Function:",n);let e="An unknown error occurred.";throw n instanceof Error?e=n.message:"object"==typeof n&&null!==n&&"message"in n&&(e=n.message),Error("Failed to update package: ".concat(e))}}async function m(e,n){let r=(0,s.Uz)(),t=(0,s.Qg)(r,"deletePackage");try{await t({packageId:n}),a(),console.log("Delete package function called for package ".concat(n))}catch(n){console.error("Error calling deletePackage Cloud Function:",n);let e="An unknown error occurred.";throw n instanceof Error?e=n.message:"object"==typeof n&&null!==n&&"message"in n&&(e=n.message),Error("Failed to delete package: ".concat(e))}}},50172:(e,n,r)=>{"use strict";r.d(n,{A:()=>t});let t=(0,r(40157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},51368:(e,n,r)=>{"use strict";let t;r.d(n,{A:()=>a});let s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},l=new Uint8Array(16),i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let a=function(e,n,r){if(s.randomUUID&&!n&&!e)return s.randomUUID();let a=(e=e||{}).random??e.rng?.()??function(){if(!t){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");t=crypto.getRandomValues.bind(crypto)}return t(l)}();if(a.length<16)throw Error("Random bytes length must be >= 16");if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n){if((r=r||0)<0||r+16>n.length)throw RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let e=0;e<16;++e)n[r+e]=a[e];return n}return function(e,n=0){return(i[e[n+0]]+i[e[n+1]]+i[e[n+2]]+i[e[n+3]]+"-"+i[e[n+4]]+i[e[n+5]]+"-"+i[e[n+6]]+i[e[n+7]]+"-"+i[e[n+8]]+i[e[n+9]]+"-"+i[e[n+10]]+i[e[n+11]]+i[e[n+12]]+i[e[n+13]]+i[e[n+14]]+i[e[n+15]]).toLowerCase()}(a)}},62096:(e,n,r)=>{Promise.resolve().then(r.bind(r,70367))},66634:(e,n,r)=>{"use strict";r.d(n,{DX:()=>a,TL:()=>i});var t=r(12115);function s(e,n){if("function"==typeof e)return e(n);null!=e&&(e.current=n)}var l=r(95155);function i(e){let n=function(e){let n=t.forwardRef((e,n)=>{let{children:r,...l}=e;if(t.isValidElement(r)){var i;let e,a,c=(i=r,(a=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(a=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),o=function(e,n){let r={...n};for(let t in n){let s=e[t],l=n[t];/^on[A-Z]/.test(t)?s&&l?r[t]=(...e)=>{let n=l(...e);return s(...e),n}:s&&(r[t]=s):"style"===t?r[t]={...s,...l}:"className"===t&&(r[t]=[s,l].filter(Boolean).join(" "))}return{...e,...r}}(l,r.props);return r.type!==t.Fragment&&(o.ref=n?function(...e){return n=>{let r=!1,t=e.map(e=>{let t=s(e,n);return r||"function"!=typeof t||(r=!0),t});if(r)return()=>{for(let n=0;n<t.length;n++){let r=t[n];"function"==typeof r?r():s(e[n],null)}}}}(n,c):c),t.cloneElement(r,o)}return t.Children.count(r)>1?t.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}(e),r=t.forwardRef((e,r)=>{let{children:s,...i}=e,a=t.Children.toArray(s),c=a.find(o);if(c){let e=c.props.children,s=a.map(n=>n!==c?n:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,l.jsx)(n,{...i,ref:r,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,l.jsx)(n,{...i,ref:r,children:s})});return r.displayName=`${e}.Slot`,r}var a=i("Slot"),c=Symbol("radix.slottable");function o(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===c}},70367:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:()=>v});var t=r(95155),s=r(66695),l=r(85127),i=r(30285),a=r(26126),c=r(6874),o=r.n(c);let d=(0,r(40157).A)("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);var u=r(50172),m=r(37648),h=r(17607),g=r(12115),f=r(82320),p=r(68856),x=r(44838),y=r(87481);function j(){return(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-32"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-48"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-24"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-24"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-20"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-4 w-16"})}),(0,t.jsx)(l.nA,{children:(0,t.jsx)(p.E,{className:"h-9 w-32"})})]})}function w(){return(0,t.jsx)(l.Hj,{children:(0,t.jsx)(l.nA,{colSpan:7,children:(0,t.jsxs)("div",{className:"text-center py-10",children:[(0,t.jsx)(d,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,t.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No Submissions Found"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"There are no submissions in the system yet."})]})})})}function v(){let[e,n]=(0,g.useState)([]),[r,c]=(0,g.useState)([]),[d,p]=(0,g.useState)(!0),[v,b]=(0,g.useState)(null),{toast:A}=(0,y.dj)(),k=async()=>{p(!0);let[e,r]=await Promise.all([(0,f.C5)(),(0,f.dQ)()]);n(e),c(r),p(!1)};(0,g.useEffect)(()=>{k()},[]);let E=e=>{let n=r.find(n=>n.id===e);return(null==n?void 0:n.name)||"Unknown"},N=async(e,n)=>{b(e);try{await (0,f.qT)(e,n),A({title:"Submission Status Updated",description:"Submission ".concat(e," status changed to ").concat(n,".")}),k()}catch(n){console.error("Error updating submission status:",n);let e="An unknown error occurred.";n instanceof Error?e=n.message:"object"==typeof n&&null!==n&&"message"in n&&(e=n.message),A({title:"Error",description:e||"Failed to update submission status.",variant:"destructive"})}finally{b(null)}},S=async(e,n)=>{b(e);try{var t;await (0,f.se)(e,n);let s=(null==(t=r.find(e=>e.id===n))?void 0:t.name)||"Unknown";A({title:"Reviewer Assigned",description:"Submission ".concat(e," assigned to ").concat(s,".")}),k()}catch(n){console.error("Error assigning reviewer:",n);let e="An unknown error occurred.";n instanceof Error?e=n.message:"object"==typeof n&&null!==n&&"message"in n&&(e=n.message),A({title:"Error",description:e||"Failed to assign reviewer.",variant:"destructive"})}finally{b(null)}};return(0,t.jsxs)(s.Zp,{children:[(0,t.jsxs)(s.aR,{children:[(0,t.jsx)(s.ZB,{children:"All Submissions"}),(0,t.jsx)(s.BT,{children:"Manage all track submissions and complete reviews on behalf of reviewers."})]}),(0,t.jsx)(s.Wu,{children:(0,t.jsxs)(l.XI,{children:[(0,t.jsx)(l.A0,{children:(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nd,{children:"Artist"}),(0,t.jsx)(l.nd,{children:"Track Title"}),(0,t.jsx)(l.nd,{children:"Genre"}),(0,t.jsx)(l.nd,{children:"Assigned Reviewer"}),(0,t.jsx)(l.nd,{children:"Status"}),(0,t.jsx)(l.nd,{children:"Submitted"}),(0,t.jsx)(l.nd,{children:(0,t.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,t.jsx)(l.BF,{children:d?Array.from({length:8}).map((e,n)=>(0,t.jsx)(j,{},n)):e.length>0?e.map(e=>(0,t.jsxs)(l.Hj,{children:[(0,t.jsx)(l.nA,{className:"font-medium max-w-[200px] truncate",title:e.artistName,children:e.artistName}),(0,t.jsx)(l.nA,{className:"max-w-[250px] truncate",title:e.songTitle,children:e.songTitle}),(0,t.jsx)(l.nA,{className:"max-w-[150px] truncate",title:e.genre,children:e.genre}),(0,t.jsx)(l.nA,{children:(0,t.jsxs)(x.rI,{children:[(0,t.jsx)(x.ty,{asChild:!0,children:(0,t.jsx)(i.$,{variant:"outline",size:"sm",disabled:v===e.id,children:v===e.id?(0,t.jsx)(u.A,{className:"h-4 w-4 animate-spin"}):E(e.reviewerId)})}),(0,t.jsx)(x.SQ,{align:"start",children:r.map(n=>(0,t.jsx)(x._2,{onClick:()=>S(e.id,n.id),disabled:e.reviewerId===n.id||v===e.id,children:n.name},n.id))})]})}),(0,t.jsx)(l.nA,{children:(0,t.jsxs)(x.rI,{children:[(0,t.jsx)(x.ty,{asChild:!0,children:(0,t.jsx)(a.Ex,{variant:"secondary",className:function(e){switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}(e.status),children:v===e.id?(0,t.jsx)(u.A,{className:"h-3 w-3 animate-spin mr-1"}):e.status})}),(0,t.jsx)(x.SQ,{align:"start",children:["pending","in-progress","completed","rejected"].map(n=>(0,t.jsx)(x._2,{onClick:()=>N(e.id,n),disabled:e.status===n||v===e.id,children:n},n))})]})}),(0,t.jsx)(l.nA,{children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{className:"text-sm",children:new Date(e.submittedAt).toLocaleDateString()})]})}),(0,t.jsx)(l.nA,{className:"text-right",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(i.$,{asChild:!0,size:"sm",variant:"outline",children:(0,t.jsxs)(o(),{href:"/admin/submissions/".concat(e.id),children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"pending"===e.status?"Review":"View"]})})})})]},e.id)):(0,t.jsx)(w,{})})]})})]})}},74466:(e,n,r)=>{"use strict";r.d(n,{F:()=>i});var t=r(52596);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,l=t.$,i=(e,n)=>r=>{var t;if((null==n?void 0:n.variants)==null)return l(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:i,defaultVariants:a}=n,c=Object.keys(i).map(e=>{let n=null==r?void 0:r[e],t=null==a?void 0:a[e];if(null===n)return null;let l=s(n)||s(t);return i[e][l]}),o=r&&Object.entries(r).reduce((e,n)=>{let[r,t]=n;return void 0===t||(e[r]=t),e},{});return l(e,c,null==n||null==(t=n.compoundVariants)?void 0:t.reduce((e,n)=>{let{class:r,className:t,...s}=n;return Object.entries(s).every(e=>{let[n,r]=e;return Array.isArray(r)?r.includes({...a,...o}[n]):({...a,...o})[n]===r})?[...e,r,t]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}}},e=>{var n=n=>e(e.s=n);e.O(0,[2992,3644,4277,555,6874,5594,375,6425,4052,3421,2320,99,8441,1684,7358],()=>n(62096)),_N_E=e.O()}]);