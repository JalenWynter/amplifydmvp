(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5661],{22346:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var s=a(95155),r=a(12115),n=a(87489),l=a(59434);let o=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:o=!0,...c}=e;return(0,s.jsx)(n.b,{ref:t,decorative:o,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...c})});o.displayName=n.b.displayName},23033:(e,t,a)=>{Promise.resolve().then(a.bind(a,87315))},26126:(e,t,a)=>{"use strict";a.d(t,{BU:()=>c,Ex:()=>o});var s=a(95155);a(12115);var r=a(74466),n=a(59434);let l=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...r})}let c=e=>{switch(e){case"Paid":case"Approved":case"Active":case"Reviewed":return"bg-green-100 text-green-800";case"In-Transit":case"In Progress":case"Used":return"bg-blue-100 text-blue-800";case"Pending":case"Pending Review":case"Suspended":return"bg-yellow-100 text-yellow-800";case"Rejected":case"Banned":return"bg-red-100 text-red-800";default:return"bg-muted text-muted-foreground"}}},28214:(e,t,a)=>{"use strict";a.d(t,{IG:()=>x,db:()=>f,j2:()=>m,rm:()=>h});var s=a(23915),r=a(93004),n=a(35317),l=a(81427),o=a(90858),c=a(86864),d=a(49509);let i={apiKey:"AIzaSyDZoznRXygrNINbo60NI6oidbcxd1vQSlY",authDomain:"amplifydmvp.firebaseapp.com",projectId:"amplifydmvp",storageBucket:"amplifydmvp.appspot.com",messagingSenderId:"486875334710",appId:"1:486875334710:web:aa477f4f137cac9d3f7097",measurementId:"G-RJJ6V0LHFK"};if(!(i.apiKey&&i.authDomain&&i.projectId&&i.storageBucket&&i.messagingSenderId&&i.appId))throw Error("Missing Firebase environment variables. Please check your .env.local file.");let u=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(i),m=(0,r.xI)(u),f=(0,n.aU)(u),x=(0,o.c7)(u);(0,c.TT)().then(e=>e?(0,c.P5)(u):null);let p=null;if(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST&&((0,r.Wq)(m,"http://".concat(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST)),console.log("Connected to Auth Emulator: http://".concat(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST))),d.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST.split(":");(0,n.vN)(f,e,parseInt(t)),console.log("Connected to Firestore Emulator: http://".concat(e,":").concat(t))}if(d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST.split(":");(0,o.nb)(x,e,parseInt(t)),console.log("Connected to Storage Emulator: http://".concat(d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST))}if(p=(0,l.Uz)(u),d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,l.f5)(p,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}function h(){if(!p&&(p=(0,l.Uz)(u),d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST)){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,l.f5)(p,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}return p}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>c});var s=a(95155),r=a(12115),n=a(66634),l=a(74466),o=a(59434);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:d=!1,...i}=e,u=d?n.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(c({variant:r,size:l,className:a})),ref:t,...i})});d.displayName="Button"},38995:(e,t,a)=>{"use strict";a.d(t,{Eb:()=>i,Sy:()=>d,dQ:()=>c,s2:()=>m,y6:()=>u});var s=a(35317),r=a(81427),n=a(28214);let l=null;function o(){console.log("Reviewer cache invalidated."),l=null}async function c(){if(l)return console.log("Returning cached reviewers..."),l;console.log("Fetching reviewers from Firestore...");let e=(await (0,s.GG)((0,s.P)((0,s.rJ)(n.db,"reviewers"),(0,s.My)("name")))).docs.map(e=>({id:e.id,...e.data()}));return l=e,e}async function d(e){console.log("[getReviewerById] Attempting to fetch reviewer with ID: ".concat(e));let t=(0,s.H9)(n.db,"reviewers",e),a=await (0,s.x7)(t);if(!a.exists())return console.log("[getReviewerById] No reviewer document found for ID: ".concat(e)),null;{let e={id:a.id,...a.data()};return console.log("[getReviewerById] Reviewer found:",e),e}}async function i(e,t){let a=(0,r.Uz)(),s=(0,r.Qg)(a,"addPackage");try{let a=await s(t);return o(),console.log("Add package function called for reviewer ".concat(e)),a.data}catch(t){console.error("Error calling addPackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to add package: ".concat(e))}}async function u(e,t){let a=(0,r.Uz)(),s=(0,r.Qg)(a,"updatePackage");try{await s(t),o(),console.log("Update package function called for package ".concat(t.id))}catch(t){console.error("Error calling updatePackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to update package: ".concat(e))}}async function m(e,t){let a=(0,r.Uz)(),s=(0,r.Qg)(a,"deletePackage");try{await s({packageId:t}),o(),console.log("Delete package function called for package ".concat(t))}catch(t){console.error("Error calling deletePackage Cloud Function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to delete package: ".concat(e))}}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(52596),r=a(39688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>i,ZB:()=>c,Zp:()=>l,aR:()=>o,wL:()=>u});var s=a(95155),r=a(12115),n=a(59434);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});o.displayName="CardHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});i.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},68856:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155),r=a(59434);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",t),...a})}},85127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>o,BF:()=>c,Hj:()=>d,XI:()=>l,nA:()=>u,nd:()=>i});var s=a(95155),r=a(12115),n=a(59434);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...r})})});l.displayName="Table";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...r})});o.displayName="TableHeader";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...r})});c.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});i.displayName="TableHead";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});u.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"},87315:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),r=a(26126),n=a(30285),l=a(66695),o=a(85127),c=a(22346),d=a(12543),i=a(37648),u=a(8376),m=a(50172),f=a(6160),x=a(6874),p=a.n(x),h=a(82320),g=a(91394),v=a(12115),N=a(68856),j=a(87481);function y(){return(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(N.E,{className:"h-7 w-1/3"}),(0,s.jsx)(N.E,{className:"h-4 w-2/3"})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsx)(N.E,{className:"h-10 w-full"}),(0,s.jsx)(N.E,{className:"h-10 w-full"})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(N.E,{className:"h-7 w-1/2"})}),(0,s.jsxs)(l.Wu,{className:"space-y-4",children:[(0,s.jsx)(N.E,{className:"h-10 w-3/4"}),(0,s.jsx)(N.E,{className:"h-4 w-full"}),(0,s.jsx)(N.E,{className:"h-4 w-full"})]})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(N.E,{className:"h-7 w-1/2"})}),(0,s.jsx)(l.Wu,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(N.E,{className:"h-12 w-12 rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(N.E,{className:"h-5 w-24"}),(0,s.jsx)(N.E,{className:"h-4 w-32 mt-1"})]})]})})]})]})]})}function w(e){let{params:t}=e,a=(0,v.use)(t),[x,N]=(0,v.useState)(void 0),[w,b]=(0,v.useState)(!1),{toast:E}=(0,j.dj)(),T=(0,v.useCallback)(async()=>{N(void 0),N(await (0,h.RY)(a.payoutId))},[a.payoutId]);(0,v.useEffect)(()=>{T()},[T]);let _=async()=>{if(x){b(!0);try{await (0,h.OC)(x.id,"Paid"),E({title:"Payout Updated",description:"This payout has been marked as paid."}),await T()}catch(e){E({title:"Error",description:"Failed to update payout status.",variant:"destructive"}),console.error("Payout update failed:",e)}finally{b(!1)}}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.$,{asChild:!0,variant:"outline",size:"sm",className:"mb-4",children:(0,s.jsxs)(p(),{href:"/admin/financials/payouts",children:[(0,s.jsx)(d.A,{className:"mr-2 h-4 w-4"}),"Back to Payouts"]})}),(0,s.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Payout Details"})]}),void 0===x?(0,s.jsx)(y,{}):null===x?(0,s.jsxs)("div",{className:"text-center py-10 border rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Payout not found"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"This payout may have been removed or does not exist."})]}):(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,s.jsx)("div",{className:"md:col-span-2",children:(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsx)(l.ZB,{children:"Included Reviews"}),(0,s.jsx)(l.BT,{children:"List of all reviews included in this payout total."})]}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{children:"Artist"}),(0,s.jsx)(o.nd,{children:"Song"}),(0,s.jsx)(o.nd,{children:"Review Date"}),(0,s.jsx)(o.nd,{className:"text-right",children:"Fee"})]})}),(0,s.jsx)(o.BF,{children:x.reviews.map(e=>(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nA,{className:"font-medium",children:e.artist}),(0,s.jsx)(o.nA,{children:e.song}),(0,s.jsx)(o.nA,{children:new Date(e.date).toLocaleDateString()}),(0,s.jsxs)(o.nA,{className:"text-right font-mono",children:["$",e.fee.toFixed(2)]})]},e.id))})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)(l.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,s.jsx)(l.ZB,{className:"text-lg",children:"Summary"}),(0,s.jsx)(r.Ex,{variant:"secondary",className:(0,r.BU)(x.status),children:x.status})]}),(0,s.jsxs)(l.Wu,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"text-4xl font-bold text-primary",children:x.amount}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"w-3 h-3"})," Requested on ",new Date(x.date).toLocaleDateString()]}),x.paidDate&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"w-3 h-3"})," Paid on ",new Date(x.paidDate).toLocaleDateString()]})]})]}),"Pending"===x.status&&(0,s.jsx)(l.Wu,{children:(0,s.jsxs)(n.$,{className:"w-full",onClick:_,disabled:w,children:[w&&(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Mark as Paid"]})})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{className:"text-lg",children:"Reviewer"})}),(0,s.jsxs)(l.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(g.Avatar,{children:[(0,s.jsx)(g.AvatarImage,{src:x.reviewer.avatarUrl,alt:x.reviewer.name}),(0,s.jsx)(g.AvatarFallback,{children:x.reviewer.name.charAt(0)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold",children:x.reviewer.name}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:x.reviewer.email})]})]}),(0,s.jsx)(c.w,{}),(0,s.jsx)("div",{className:"text-sm space-y-2",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(f.A,{className:"w-4 h-4"})," Payout Method: ",x.paymentMethod]})})]})]})]})]})]})}},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>m});var s=a(12115);let r=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),i({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],d={toasts:[]};function i(e){d=o(d,e),c.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>i({type:"DISMISS_TOAST",toastId:a});return i({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>i({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>i({type:"DISMISS_TOAST",toastId:e})}}},91394:(e,t,a)=>{"use strict";a.d(t,{Avatar:()=>o,AvatarFallback:()=>d,AvatarImage:()=>c});var s=a(95155),r=a(12115),n=a(85977),l=a(59434);let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.bL,{ref:t,className:(0,l.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...r})});o.displayName=n.bL.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n._V,{ref:t,className:(0,l.cn)("aspect-square h-full w-full",a),...r})});c.displayName=n._V.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.H4,{ref:t,className:(0,l.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...r})});d.displayName=n.H4.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,3644,4277,555,6874,5594,9696,2320,8441,1684,7358],()=>t(23033)),_N_E=e.O()}]);