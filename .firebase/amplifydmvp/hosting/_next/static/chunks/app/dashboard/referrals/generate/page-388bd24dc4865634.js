(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9406],{12543:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},43400:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var r=a(95155),t=a(90221),i=a(62177),l=a(55594),n=a(30285),c=a(17759),d=a(62523),o=a(66695),h=a(50172),u=a(12543),m=a(50286),x=a(50594),f=a(12115),j=a(87481),p=a(35695),y=a(55365),N=a(82320),b=a(8731),v=a(28214),g=a(6874),w=a.n(g);let k=new RegExp(/^([+]?[\s0-9]+)?(\d{3}|[(]?[0-9]+[)])?([-]?[\s]?[0-9])+$/),A=l.Ik({associatedUser:l.Yj().superRefine((e,s)=>{let a=l.Yj().email().safeParse(e).success,r=k.test(e)&&e.length>=10;a||r||s.addIssue({code:l.eq.custom,message:"Must be a valid email or a phone number with at least 10 digits."})})});function C(){let[e,s]=(0,b.hD)(v.j2),{toast:a}=(0,j.dj)(),l=(0,p.useRouter)(),[g,k]=(0,f.useState)(!1),[C,R]=(0,f.useState)(0),[E,S]=(0,f.useState)(!0),I=(0,i.mN)({resolver:(0,t.u)(A),defaultValues:{associatedUser:""}});async function L(e){k(!0);try{let s=await (0,N.Nq)(e.associatedUser);R(e=>e+1),a({title:"Referral Code Generated! \uD83C\uDF89",description:"Your invite code: ".concat(s.code," - Share this with industry professionals you&apos;d like to invite."),duration:8e3}),l.push("/dashboard/referrals?newCode=".concat(s.id))}catch(e){a({title:"Failed to Generate Code",description:e instanceof Error?e.message:"There was a problem creating the referral code. Please try again.",variant:"destructive"})}finally{k(!1)}}return((0,f.useEffect)(()=>{e&&e.email&&I.setValue("associatedUser",e.email)},[e,I]),(0,f.useEffect)(()=>{e&&!s&&(async()=>{try{let s=await (0,N.ul)(e.uid);R(s)}catch(e){console.error("Error fetching daily codes count:",e)}finally{S(!1)}})()},[e,s]),s)?(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)(h.A,{className:"h-8 w-8 animate-spin"})}):(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(n.$,{variant:"outline",size:"sm",asChild:!0,children:(0,r.jsxs)(w(),{href:"/dashboard/referrals",children:[(0,r.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Back to Referrals"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold font-headline",children:"Generate Referral Code"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Create a unique invite code for music industry professionals."})]})]}),(0,r.jsxs)(o.Zp,{className:"max-w-2xl",children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsxs)(o.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(m.A,{className:"w-5 h-5"}),"Generate Invite Code"]}),(0,r.jsx)(o.BT,{children:"Create a unique, 24-hour invite code to help grow the Amplifyd community."}),!E&&(0,r.jsx)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:["Daily Limit: ",C,"/10 codes used"]}),(0,r.jsxs)("span",{className:"text-sm text-blue-700",children:[10-C," remaining"]})]})})]}),(0,r.jsxs)(o.Wu,{children:[(0,r.jsx)(c.lV,{...I,children:(0,r.jsxs)("form",{onSubmit:I.handleSubmit(L),className:"space-y-6",children:[(0,r.jsx)(c.zB,{control:I.control,name:"associatedUser",render:e=>{let{field:s}=e;return(0,r.jsxs)(c.eI,{children:[(0,r.jsx)(c.lR,{children:"Your Contact Information"}),(0,r.jsx)(c.MJ,{children:(0,r.jsx)(d.p,{placeholder:"Enter your email or phone number",...s})}),(0,r.jsx)(c.Rr,{children:"This referral code will be linked to your account for tracking purposes."}),(0,r.jsx)(c.C5,{})]})}}),(0,r.jsxs)(n.$,{type:"submit",className:"w-full",disabled:g||E||C>=10,children:[g&&(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),C>=10?"Daily Limit Reached":"Generate Referral Code"]})]})}),!E&&C>=10&&(0,r.jsxs)(y.Fc,{className:"mt-6 border-orange-200 bg-orange-50",children:[(0,r.jsx)(x.A,{className:"h-4 w-4 text-orange-600"}),(0,r.jsx)(y.XL,{className:"text-orange-900",children:"Daily Limit Reached"}),(0,r.jsx)(y.TN,{className:"text-orange-800",children:"You've generated 10 referral codes today. The daily limit resets at midnight to ensure fair usage across all reviewers."})]}),(0,r.jsxs)(y.Fc,{className:"mt-6",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)(y.XL,{children:"How It Works"}),(0,r.jsx)(y.TN,{children:"Your referral code will be valid for 24 hours and can only be used once. Share it with music industry professionals you'd like to invite to join Amplifyd as reviewers."})]})]})]})]})}},50286:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},78292:(e,s,a)=>{Promise.resolve().then(a.bind(a,43400))}},e=>{var s=s=>e(e.s=s);e.O(0,[2992,3644,4277,555,6874,5594,9260,8731,2320,5959,8441,1684,7358],()=>s(78292)),_N_E=e.O()}]);