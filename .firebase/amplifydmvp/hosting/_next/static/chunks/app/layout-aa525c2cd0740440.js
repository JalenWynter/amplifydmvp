(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{4637:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(95155),n=r(98921);function o(){return(0,s.jsxs)("div",{className:"flex items-center gap-2 text-primary",children:[(0,s.jsx)("div",{className:"bg-primary text-primary-foreground p-1.5 rounded-lg",children:(0,s.jsx)(n.A,{className:"w-5 h-5"})}),(0,s.jsx)("span",{className:"text-xl font-bold font-headline tracking-tighter",children:"Amplifyd"})]})}},23245:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(95155),n=r(59576);function o(){let{currentUser:e,loading:t,error:r,firebaseUser:o,isAdmin:a,isReviewer:i}=(0,n.A)();return(0,s.jsxs)("div",{style:{backgroundColor:"black",color:"white",padding:"20px",position:"fixed",bottom:"0",left:"0",right:"0",zIndex:9999,fontSize:"12px",fontFamily:"monospace",maxHeight:"200px",overflowY:"auto"},children:[(0,s.jsx)("h3",{style:{color:"lime"},children:"Auth Debugger"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Loading:"})," ",t.toString()]}),r&&(0,s.jsxs)("p",{style:{color:"red"},children:[(0,s.jsx)("strong",{children:"Error:"})," ",r]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Firebase User:"})," ",o?o.uid:"null"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Is Admin:"})," ",a.toString()]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Is Reviewer:"})," ",i.toString()]}),(0,s.jsxs)("pre",{children:[(0,s.jsx)("strong",{children:"Current User Info:"}),JSON.stringify(e,null,2)]})]})}},28214:(e,t,r)=>{"use strict";r.d(t,{IG:()=>m,db:()=>f,j2:()=>p,rm:()=>g});var s=r(23915),n=r(93004),o=r(35317),a=r(81427),i=r(90858),l=r(86864),d=r(49509);let c={apiKey:"AIzaSyDZoznRXygrNINbo60NI6oidbcxd1vQSlY",authDomain:"amplifydmvp.firebaseapp.com",projectId:"amplifydmvp",storageBucket:"amplifydmvp.appspot.com",messagingSenderId:"486875334710",appId:"1:486875334710:web:aa477f4f137cac9d3f7097",measurementId:"G-RJJ6V0LHFK"};if(!(c.apiKey&&c.authDomain&&c.projectId&&c.storageBucket&&c.messagingSenderId&&c.appId))throw Error("Missing Firebase environment variables. Please check your .env.local file.");let u=(0,s.Dk)().length?(0,s.Sx)():(0,s.Wp)(c),p=(0,n.xI)(u),f=(0,o.aU)(u),m=(0,i.c7)(u);(0,l.TT)().then(e=>e?(0,l.P5)(u):null);let h=null;if(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST&&((0,n.Wq)(p,"http://".concat(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST)),console.log("Connected to Auth Emulator: http://".concat(d.env.NEXT_PUBLIC_FIREBASE_AUTH_EMULATOR_HOST))),d.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FIRESTORE_EMULATOR_HOST.split(":");(0,o.vN)(f,e,parseInt(t)),console.log("Connected to Firestore Emulator: http://".concat(e,":").concat(t))}if(d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST.split(":");(0,i.nb)(m,e,parseInt(t)),console.log("Connected to Storage Emulator: http://".concat(d.env.NEXT_PUBLIC_FIREBASE_STORAGE_EMULATOR_HOST))}if(h=(0,a.Uz)(u),d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,a.f5)(h,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}function g(){if(!h&&(h=(0,a.Uz)(u),d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST)){let[e,t]=d.env.NEXT_PUBLIC_FIREBASE_FUNCTIONS_EMULATOR_HOST.split(":");(0,a.f5)(h,e,parseInt(t)),console.log("Connected to Functions Emulator: http://".concat(e,":").concat(t))}return h}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>d,r:()=>l});var s=r(95155),n=r(12115),o=r(66634),a=r(74466),i=r(59434);let l=(0,a.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:a,asChild:d=!1,...c}=e,u=d?o.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(l({variant:n,size:a,className:r})),ref:t,...c})});d.displayName="Button"},30347:()=>{},30429:(e,t,r)=>{"use strict";r.d(t,{default:()=>m});var s=r(95155),n=r(6874),o=r.n(n),a=r(30285),i=r(4637),l=r(35695),d=r(59434),c=r(8731),u=r(28214),p=r(33349);let f=[{href:"/features",label:"Reviewers"},{href:"/reviews",label:"Reviews"}];function m(){let e=(0,l.usePathname)(),[t,r]=(0,c.hD)(u.j2),n=async()=>{try{await u.j2.signOut()}catch(e){console.error("Error signing out:",e)}};return(0,s.jsx)("header",{className:"bg-card/80 backdrop-blur-lg border-b sticky top-0 z-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-8",children:[(0,s.jsx)(o(),{href:"/",className:"flex items-center gap-2",children:(0,s.jsx)(i.A,{})}),(0,s.jsx)("nav",{className:"hidden md:flex items-center space-x-4",children:f.map(t=>(0,s.jsx)(o(),{href:t.href,className:(0,d.cn)("text-sm font-medium transition-colors hover:text-primary",e.startsWith(t.href)?"text-primary":"text-muted-foreground"),children:t.label},t.href))})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:r?(0,s.jsx)("div",{className:"w-24 h-8 bg-muted rounded-md animate-pulse"}):t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.$,{asChild:!0,variant:"ghost",children:(0,s.jsx)(o(),{href:"/dashboard",children:"Dashboard"})}),(0,s.jsxs)(a.$,{onClick:n,variant:"outline",children:[(0,s.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Log Out"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.$,{asChild:!0,variant:"ghost",children:(0,s.jsx)(o(),{href:"/login",children:"Login"})}),(0,s.jsx)(a.$,{asChild:!0,children:(0,s.jsx)(o(),{href:"/apply",children:"Apply to Review"})})]})})]})})})}},45011:(e,t,r)=>{"use strict";r.d(t,{Kg:()=>l,lo:()=>a,pD:()=>i});var s=r(35317),n=r(81427),o=r(28214);async function a(){return console.log("Fetching users from Firestore..."),(await (0,s.GG)((0,s.P)((0,s.rJ)(o.db,"users"),(0,s.My)("joinedAt","desc")))).docs.map(e=>({id:e.id,...e.data()}))}async function i(){if(console.log("[getCurrentUserInfo] Getting current user info..."),!o.j2.currentUser)return console.log("[getCurrentUserInfo] No authenticated user."),null;console.log("[getCurrentUserInfo] Authenticated user UID: ".concat(o.j2.currentUser.uid));let e=(0,s.H9)(o.db,"users",o.j2.currentUser.uid),t=await (0,s.x7)(e);if(!t.exists())return console.log("[getCurrentUserInfo] No user document found for UID: ".concat(o.j2.currentUser.uid)),null;let r={id:t.id,...t.data()};return console.log("[getCurrentUserInfo] User document found:",r),r}async function l(e){console.log("Invoking 'approveApplication' cloud function for application: ".concat(e));try{let t=(0,n.Uz)(),r=(0,n.Qg)(t,"approveApplication"),s=await r({applicationId:e});return console.log("âœ… Application approved successfully.",s.data),s.data}catch(t){console.error("Error calling 'approveApplication' cloud function:",t);let e="An unknown error occurred.";throw t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),Error("Failed to approve application: ".concat(e))}}},52558:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>v});var s=r(95155),n=r(87481),o=r(12115),a=r(26621),i=r(74466),l=r(25318),d=r(59434);let c=a.Kq,u=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...n})});u.displayName=a.LM.displayName;let p=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=o.forwardRef((e,t)=>{let{className:r,variant:n,...o}=e;return(0,s.jsx)(a.bL,{ref:t,className:(0,d.cn)(p({variant:n}),r),...o})});f.displayName=a.bL.displayName,o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...n})}).displayName=a.rc.displayName;let m=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.bm,{ref:t,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...n,children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})});m.displayName=a.bm.displayName;let h=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold",r),...n})});h.displayName=a.hE.displayName;let g=o.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",r),...n})});function v(){let{toasts:e}=(0,n.dj)();return(0,s.jsxs)(c,{children:[e.map(function(e){let{id:t,title:r,description:n,action:o,...a}=e;return(0,s.jsxs)(f,{...a,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[r&&(0,s.jsx)(h,{children:r}),n&&(0,s.jsx)(g,{children:n})]}),o,(0,s.jsx)(m,{})]},t)}),(0,s.jsx)(u,{})]})}g.displayName=a.VY.displayName},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var s=r(52596),n=r(39688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,s.$)(t))}},59576:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>c});var s=r(95155),n=r(12115),o=r(93004),a=r(28214),i=r(45011),l=r(50172);let d=(0,n.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,n.useState)(null),[u,p]=(0,n.useState)(null),[f,m]=(0,n.useState)(!0),[h,g]=(0,n.useState)(null);(0,n.useEffect)(()=>{let e=(0,o.hg)(a.j2,async e=>{if(p(e),e)try{let e=await (0,i.pD)();console.log("User info in AuthContext:",e),c(e),g(null)}catch(t){console.error("Error fetching user info from Firestore:",t);let e="Failed to load user profile.";t instanceof Error?e=t.message:"object"==typeof t&&null!==t&&"message"in t&&(e=t.message),g(e),c(null)}else c(null),g(null);m(!1)});return()=>e()},[]);let v=(null==r?void 0:r.role)==="admin",x=(null==r?void 0:r.role)==="reviewer",b=(null==r?void 0:r.role)==="uploader";return f?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)(l.A,{className:"w-10 h-10 animate-spin text-primary"})}):(0,s.jsx)(d.Provider,{value:{currentUser:r,loading:f,error:h,firebaseUser:u,isAdmin:v,isReviewer:x,isUploader:b},children:t})},u=()=>{let e=(0,n.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},77414:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6874,23)),Promise.resolve().then(r.t.bind(r,30347,23)),Promise.resolve().then(r.t.bind(r,19993,23)),Promise.resolve().then(r.t.bind(r,23622,23)),Promise.resolve().then(r.bind(r,23245)),Promise.resolve().then(r.bind(r,30429)),Promise.resolve().then(r.bind(r,52558)),Promise.resolve().then(r.bind(r,59576))},87481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>p});var s=r(12115);let n=0,o=new Map,a=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?a(r):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=i(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var t=t=>e(e.s=t);e.O(0,[6421,2992,3644,4277,555,6874,8731,1142,8441,1684,7358],()=>t(77414)),_N_E=e.O()}]);